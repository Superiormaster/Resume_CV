# Preview

let timeout;
async function updatePreview() {
  const form = document.getElementById('resumeForm');
  const data = new FormData(form);

  try {
    const resp = await fetch("{{ url_for('resume.preview') }}", {
      method: "POST",
      body: data
    });

    const j = await resp.json();
    const iframe = document.getElementById('previewFrame');
    iframe.srcdoc = j.html;
  } catch (err) {
    console.error("Preview error", err);
  }
}

    document.getElementById('previewBtn').addEventListener('click', updatePreview);
    document.getElementById('resumeForm').addEventListener('input', () => {
      clearTimeout(timeout);
      timeout = setTimeout(updatePreview, 600);
    });
    
    window.addEventListener('load', updatePreview);
    
# Password

const togglePassword = document.querySelector('#togglePassword');
  const password = document.querySelector('#password');

  togglePassword.addEventListener('click', function () {
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);

    // toggle the icon between eye and eye-slash
    this.classList.toggle('fa-eye-slash');

    this.style.color = type === 'password' ? '#d4af37' : '#f3d07a';
  });
  